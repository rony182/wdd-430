{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Game } from '../game.model';\nlet GameEditComponent = class GameEditComponent {\n  constructor(gameService, teamService,\n  // Inject the Team service\n  route, router) {\n    this.gameService = gameService;\n    this.teamService = teamService;\n    this.route = route;\n    this.router = router;\n    this.editMode = false;\n    // Subscribe to the teamsListChangedEvent\n    this.teamService.teamListChangedEvent.subscribe(teams => {\n      this.teams = teams;\n    });\n  }\n  ngOnInit() {\n    this.teamService.teamListChangedEvent.subscribe(teams => {\n      this.teams = teams;\n      this.initializeGame();\n    });\n    this.teamService.getTeams(); // Move getTeams() call here\n    this.route.params.subscribe(params => {\n      let id = params['id'];\n      if (id === undefined || id === null) {\n        this.editMode = false;\n        return; // Remove the teamService.getTeams() call from here\n      }\n\n      this.gameService.gameListChangedEvent.subscribe(games => {\n        this.originalGame = this.gameService.getGame(id);\n        if (this.originalGame === undefined || this.originalGame === null) {\n          return;\n        }\n        this.editMode = true;\n        this.game = JSON.parse(JSON.stringify(this.originalGame));\n      });\n      this.gameService.getGames();\n    });\n  }\n  initializeGame() {\n    if (this.teams.length > 0 && this.game) {\n      this.game.homeTeam = this.teams.find(team => team.id === this.game.homeTeam?.id);\n      this.game.awayTeam = this.teams.find(team => team.id === this.game.awayTeam?.id);\n    }\n  }\n  onSubmit(form) {\n    let values = form.value;\n    let newGame = new Game(null, values.gameDate, values.time, values.homeTeam, values.awayTeam, values.location, values.attendance, values.finalScore, values.recap);\n    if (this.editMode === true) {\n      this.gameService.updateGame(this.originalGame, newGame);\n    } else {\n      this.gameService.addGame(newGame);\n    }\n    this.router.navigate(['/games']);\n  }\n  onCancel() {\n    this.router.navigate(['/games']);\n  }\n};\nGameEditComponent = __decorate([Component({\n  selector: 'wdd430-game-edit',\n  templateUrl: './game-edit.component.html',\n  styleUrls: ['./game-edit.component.css']\n})], GameEditComponent);\nexport { GameEditComponent };","map":{"version":3,"mappings":"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","names":["Component","Game","GameEditComponent","constructor","gameService","teamService","route","router","teamListChangedEvent","subscribe","teams","ngOnInit","initializeGame","getTeams","params","id","undefined","editMode","gameListChangedEvent","games","originalGame","getGame","game","JSON","parse","stringify","getGames","length","homeTeam","find","team","awayTeam","onSubmit","form","values","value","newGame","gameDate","time","location","attendance","finalScore","recap","updateGame","addGame","navigate","onCancel","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\laragon\\www\\wdd-430\\src\\app\\games\\game-edit\\game-edit.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Game } from '../game.model';\nimport { GameService } from '../game.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgForm } from '@angular/forms';\nimport { Team } from '../../teams/team.model';\nimport { TeamService } from '../../teams/team.service';\n\n@Component({\n  selector: 'wdd430-game-edit',\n  templateUrl: './game-edit.component.html',\n  styleUrls: ['./game-edit.component.css'],\n})\nexport class GameEditComponent implements OnInit {\n  originalGame: Game;\n  game: Game;\n  editMode: boolean = false;\n  teams: Team[]; // Variable to store the teams\n\n  constructor(\n    private gameService: GameService,\n    private teamService: TeamService, // Inject the Team service\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n    // Subscribe to the teamsListChangedEvent\n    this.teamService.teamListChangedEvent.subscribe((teams: Team[]) => {\n      this.teams = teams;\n    });\n  }\n\n  ngOnInit() {\n    this.teamService.teamListChangedEvent.subscribe((teams: Team[]) => {\n      this.teams = teams;\n      this.initializeGame();\n    });\n  \n    this.teamService.getTeams(); // Move getTeams() call here\n  \n    this.route.params.subscribe((params) => {\n      let id = params['id'];\n      if (id === undefined || id === null) {\n        this.editMode = false;\n        return; // Remove the teamService.getTeams() call from here\n      }\n  \n      this.gameService.gameListChangedEvent.subscribe((games: Game[]) => {\n        this.originalGame = this.gameService.getGame(id);\n        if (this.originalGame === undefined || this.originalGame === null) {\n          return;\n        }\n        this.editMode = true;\n        this.game = JSON.parse(JSON.stringify(this.originalGame));\n      });\n  \n      this.gameService.getGames();\n    });\n  }\n  \n\n  initializeGame() {\n    if (this.teams.length > 0 && this.game) {\n      this.game.homeTeam = this.teams.find((team) => team.id === this.game.homeTeam?.id);\n      this.game.awayTeam = this.teams.find((team) => team.id === this.game.awayTeam?.id);\n    }\n  }\n\n  onSubmit(form: NgForm) {\n    let values = form.value;\n    let newGame = new Game(\n      null,\n      values.gameDate,\n      values.time,  \n      values.homeTeam,\n      values.awayTeam,\n      values.location,\n      values.attendance,\n      values.finalScore,\n      values.recap\n    );\n    if (this.editMode === true) {\n      this.gameService.updateGame(this.originalGame, newGame);\n    } else {\n      this.gameService.addGame(newGame);\n    }\n    this.router.navigate(['/games']);\n  }\n\n  onCancel() {\n    this.router.navigate(['/games']);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}