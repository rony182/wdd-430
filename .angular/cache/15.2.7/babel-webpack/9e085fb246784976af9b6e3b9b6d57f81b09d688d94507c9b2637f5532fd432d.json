{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Player } from '../player.model';\nlet PlayerEditComponent = class PlayerEditComponent {\n  constructor(playerService, route, router, teamService // Inject the Team service\n  ) {\n    this.playerService = playerService;\n    this.route = route;\n    this.router = router;\n    this.teamService = teamService;\n    this.player = null;\n    this.editMode = false;\n  }\n  ngOnInit() {\n    this.teamService.teamListChangedEvent.subscribe(teams => {\n      this.teams = teams;\n      this.teamMap = this.createTeamMap(teams);\n      this.initializePlayer();\n    });\n    this.teamService.getTeams(); // Move getTeams() call here\n    this.route.params.subscribe(params => {\n      let id = params['id'];\n      if (id === undefined || id === null) {\n        this.editMode = false;\n        return;\n      }\n      this.playerService.playerListChangedEvent.subscribe(players => {\n        this.originalPlayer = this.playerService.getPlayer(id);\n        if (this.originalPlayer === undefined || this.originalPlayer === null) {\n          return;\n        }\n        this.editMode = true;\n        this.player = JSON.parse(JSON.stringify(this.originalPlayer));\n        this.initializePlayer();\n      });\n      this.playerService.getPlayers();\n    });\n  }\n  onSubmit(form) {\n    let values = form.value;\n    let team = this.teamMap[values.club];\n    let newPlayer = new Player(null, values.playerName, values.position, values.height, values.weight, values.birthDate, values.nationality, values.experienceYears, team);\n    if (this.editMode) {\n      this.playerService.updatePlayer(this.originalPlayer, newPlayer);\n    } else {\n      this.playerService.addPlayer(newPlayer);\n    }\n    this.router.navigate(['/players']);\n  }\n  onCancel() {\n    this.router.navigate(['/players']);\n  }\n  createTeamMap(teams) {\n    let map = {};\n    for (let team of teams) {\n      map[team.id] = team;\n    }\n    return map;\n  }\n  initializePlayer() {\n    if (this.teams.length > 0) {\n      this.player.club = this.teams.find(team => team.id === this.player.club?.id);\n      this.selectedClub = this.player.club?.id;\n    } else {\n      this.player = {\n        id: null,\n        playerName: null,\n        position: null,\n        height: null,\n        weight: null,\n        birthdate: null,\n        nationality: null,\n        experienceYears: null,\n        club: null\n      };\n      this.selectedClub = null;\n    }\n  }\n  getCurrentDate() {\n    const currentDate = new Date();\n    const year = currentDate.getFullYear();\n    const month = (currentDate.getMonth() + 1).toString().padStart(2, '0');\n    const day = currentDate.getDate().toString().padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  getSelectedClubId() {\n    return this.player?.club?.id;\n  }\n  setSelectedClubId(id) {\n    this.player.club = this.teams.find(team => team.id === id);\n  }\n};\nPlayerEditComponent = __decorate([Component({\n  selector: 'wdd430-player-edit',\n  templateUrl: './player-edit.component.html',\n  styleUrls: ['./player-edit.component.css']\n})], PlayerEditComponent);\nexport { PlayerEditComponent };","map":{"version":3,"mappings":"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","names":["Component","Player","PlayerEditComponent","constructor","playerService","route","router","teamService","ngOnInit","teamListChangedEvent","subscribe","teams","teamMap","createTeamMap","initializePlayer","getTeams","params","id","undefined","editMode","playerListChangedEvent","players","originalPlayer","getPlayer","player","JSON","parse","stringify","getPlayers","onSubmit","form","values","value","team","club","newPlayer","playerName","position","height","weight","birthDate","nationality","experienceYears","updatePlayer","addPlayer","navigate","onCancel","map","length","find","selectedClub","birthdate","getCurrentDate","currentDate","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","getSelectedClubId","setSelectedClubId","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\laragon\\www\\wdd-430\\src\\app\\players\\player-edit\\player-edit.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Player } from '../player.model';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PlayerService } from '../player.service';\nimport { NgForm } from '@angular/forms';\nimport { Team } from '../../teams/team.model';\nimport { TeamService } from '../../teams/team.service';\n\n@Component({\n  selector: 'wdd430-player-edit',\n  templateUrl: './player-edit.component.html',\n  styleUrls: ['./player-edit.component.css'],\n})\nexport class PlayerEditComponent implements OnInit {\n  originalPlayer: Player;\n  player: Player = null;\n  editMode: boolean = false;\n  players: Player[]; // Variable to store the players\n  teams: Team[]; // Variable to store the teams\n\n  teamMap: { [id: number]: Team }; // Map to store teams by ID\n  selectedClub: number; // Update the type to number\n\n  constructor(\n    private playerService: PlayerService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private teamService: TeamService // Inject the Team service\n  ) {}\n\n  ngOnInit() {\n    this.teamService.teamListChangedEvent.subscribe((teams: Team[]) => {\n      this.teams = teams;\n      this.teamMap = this.createTeamMap(teams);\n      this.initializePlayer();\n    });\n    \n    this.teamService.getTeams(); // Move getTeams() call here\n    this.route.params.subscribe((params) => {\n      let id = params['id'];\n      if (id === undefined || id === null) {\n        this.editMode = false;\n        return;\n      }\n\n      this.playerService.playerListChangedEvent.subscribe(\n        (players: Player[]) => {\n          this.originalPlayer = this.playerService.getPlayer(id);\n          if (\n            this.originalPlayer === undefined ||\n            this.originalPlayer === null\n          ) {\n            return;\n          }\n          this.editMode = true;\n          this.player = JSON.parse(JSON.stringify(this.originalPlayer));\n          this.initializePlayer();\n        }\n      );\n      this.playerService.getPlayers();\n    });\n  }\n\n  onSubmit(form: NgForm) {\n    let values = form.value;\n    let team = this.teamMap[values.club];\n    let newPlayer = new Player(\n      null,\n      values.playerName,\n      values.position,\n      values.height,\n      values.weight,\n      values.birthDate,\n      values.nationality,\n      values.experienceYears,\n      team\n    );\n    if (this.editMode) {\n      this.playerService.updatePlayer(this.originalPlayer, newPlayer);\n    } else {\n      this.playerService.addPlayer(newPlayer);\n    }\n    this.router.navigate(['/players']);\n  }\n\n  onCancel() {\n    this.router.navigate(['/players']);\n  }\n\n  createTeamMap(teams: Team[]): { [id: number]: Team } {\n    let map: { [id: number]: Team } = {};\n    for (let team of teams) {\n      map[team.id] = team;\n    }\n    return map;\n  }\n\n  initializePlayer() {\n    if (this.teams.length > 0) {\n      this.player.club = this.teams.find((team) => team.id === this.player.club?.id);\n      this.selectedClub = this.player.club?.id;\n    } else {\n      this.player = {\n        id: null,\n        playerName: null,\n        position: null,\n        height: null,\n        weight: null,\n        birthdate: null,\n        nationality: null,\n        experienceYears: null,\n        club: null,\n      };\n      this.selectedClub = null;\n    }\n  }\n  getCurrentDate(): string {\n    const currentDate = new Date();\n    const year = currentDate.getFullYear();\n    const month = (currentDate.getMonth() + 1).toString().padStart(2, '0');\n    const day = currentDate.getDate().toString().padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n\n  getSelectedClubId() {\n    return this.player?.club?.id;\n  }\n  \n  setSelectedClubId(id: number) {\n    this.player.club = this.teams.find((team) => team.id === id);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}