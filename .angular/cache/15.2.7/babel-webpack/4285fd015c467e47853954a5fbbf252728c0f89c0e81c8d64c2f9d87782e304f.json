{"ast":null,"code":"import { Player } from '../player.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../player.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../teams/team.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction PlayerEditComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid position\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid height between 1 and 2.5\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid Weight\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid birthdate\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid Nationality\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid integer between 0 and 30\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_option_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const team_r18 = ctx.$implicit;\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", team_r18.id)(\"selected\", team_r18.id === (ctx_r15.player == null ? null : ctx_r15.player.club == null ? null : ctx_r15.player.club.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", team_r18.teamName, \" \");\n  }\n}\nfunction PlayerEditComponent_div_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Please enter a valid club\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PlayerEditComponent_div_69_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Player Name is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Position is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Height is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Weight is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_li_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Birthdate is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Nationality is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"Experience Years is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerEditComponent_div_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"div\")(2, \"p\");\n    i0.ɵɵtext(3, \"Please fix the following errors:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ul\");\n    i0.ɵɵtemplate(5, PlayerEditComponent_div_69_li_5_Template, 2, 0, \"li\", 39);\n    i0.ɵɵtemplate(6, PlayerEditComponent_div_69_li_6_Template, 2, 0, \"li\", 39);\n    i0.ɵɵtemplate(7, PlayerEditComponent_div_69_li_7_Template, 2, 0, \"li\", 39);\n    i0.ɵɵtemplate(8, PlayerEditComponent_div_69_li_8_Template, 2, 0, \"li\", 39);\n    i0.ɵɵtemplate(9, PlayerEditComponent_div_69_li_9_Template, 2, 0, \"li\", 39);\n    i0.ɵɵtemplate(10, PlayerEditComponent_div_69_li_10_Template, 2, 0, \"li\", 39);\n    i0.ɵɵtemplate(11, PlayerEditComponent_div_69_li_11_Template, 2, 0, \"li\", 39);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(9);\n    const _r2 = i0.ɵɵreference(15);\n    const _r4 = i0.ɵɵreference(22);\n    const _r6 = i0.ɵɵreference(29);\n    const _r8 = i0.ɵɵreference(36);\n    const _r10 = i0.ɵɵreference(44);\n    const _r12 = i0.ɵɵreference(51);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !_r1.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !_r2.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !_r4.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !_r6.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !_r8.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !_r10.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !_r12.valid);\n  }\n}\nexport class PlayerEditComponent {\n  constructor(playerService, route, router, teamService // Inject the Team service\n  ) {\n    this.playerService = playerService;\n    this.route = route;\n    this.router = router;\n    this.teamService = teamService;\n    this.player = null;\n    this.editMode = false;\n  }\n  ngOnInit() {\n    this.teamService.teamListChangedEvent.subscribe(teams => {\n      this.teams = teams;\n      this.teamMap = this.createTeamMap(teams);\n      this.initializePlayer();\n    });\n    this.teamService.getTeams(); // Move getTeams() call here\n    this.route.params.subscribe(params => {\n      let id = params['id'];\n      if (id === undefined || id === null) {\n        this.editMode = false;\n        return;\n      }\n      this.playerService.playerListChangedEvent.subscribe(players => {\n        this.originalPlayer = this.playerService.getPlayer(id);\n        if (this.originalPlayer === undefined || this.originalPlayer === null) {\n          return;\n        }\n        this.editMode = true;\n        this.player = JSON.parse(JSON.stringify(this.originalPlayer));\n        this.initializePlayer();\n      });\n      this.playerService.getPlayers();\n    });\n  }\n  onSubmit(form) {\n    let values = form.value;\n    let club = this.teamMap[values.club];\n    console.log(team);\n    let newPlayer = new Player(null, values.playerName, values.position, values.height, values.weight, values.birthdate, values.nationality, values.experienceYears, team);\n    if (this.editMode) {\n      this.playerService.updatePlayer(this.originalPlayer, newPlayer);\n    } else {\n      this.playerService.addPlayer(newPlayer);\n    }\n    this.router.navigate(['/players']);\n  }\n  onCancel() {\n    this.router.navigate(['/players']);\n  }\n  createTeamMap(teams) {\n    let map = {};\n    for (let team of teams) {\n      map[team.id] = team;\n    }\n    return map;\n  }\n  initializePlayer() {\n    if (this.teams.length > 0) {\n      this.player.club = this.teams.find(team => team.id === this.player.club?.id);\n      this.selectedClub = this.player.club?.id;\n    } else {\n      this.player = {\n        id: null,\n        playerName: null,\n        position: null,\n        height: null,\n        weight: null,\n        birthdate: null,\n        nationality: null,\n        experienceYears: null,\n        club: null\n      };\n      this.selectedClub = null;\n    }\n  }\n  getCurrentDate() {\n    const currentDate = new Date();\n    const year = currentDate.getFullYear();\n    const month = (currentDate.getMonth() + 1).toString().padStart(2, '0');\n    const day = currentDate.getDate().toString().padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n  getSelectedClubId() {\n    return this.player?.club?.id;\n  }\n  setSelectedClubId(id) {\n    this.player.club = this.teams.find(team => team.id === id);\n  }\n}\nPlayerEditComponent.ɵfac = function PlayerEditComponent_Factory(t) {\n  return new (t || PlayerEditComponent)(i0.ɵɵdirectiveInject(i1.PlayerService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.TeamService));\n};\nPlayerEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PlayerEditComponent,\n  selectors: [[\"wdd430-player-edit\"]],\n  decls: 70,\n  vars: 21,\n  consts: [[1, \"panel\", \"panel-default\"], [1, \"panel-body\"], [\"id\", \"contact-edit\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"row\"], [1, \"col-sm-12\", \"form-group\"], [\"for\", \"playerName\"], [\"type\", \"text\", \"id\", \"playerName\", \"required\", \"\", \"name\", \"playerName\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"playerName\", \"ngModel\"], [\"for\", \"position\"], [\"type\", \"text\", \"id\", \"position\", \"required\", \"\", \"name\", \"position\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"position\", \"ngModel\"], [\"class\", \"alert  alert-danger\", 4, \"ngIf\"], [\"for\", \"height\"], [\"type\", \"number\", \"id\", \"height\", \"required\", \"\", \"name\", \"height\", \"step\", \"0.1\", \"min\", \"1\", \"max\", \"2.5\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"height\", \"ngModel\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"weight\"], [\"type\", \"number\", \"id\", \"weight\", \"required\", \"\", \"name\", \"weight\", \"pattern\", \"^(?:(?:5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-9]|[1-4][0-9]{2})(?:\\\\.[0-9]{1,2})?|150(?:\\\\.00)?)$\", \"minlength\", \"3\", \"maxlength\", \"6\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"weight\", \"ngModel\"], [\"for\", \"birthdate\"], [\"type\", \"date\", \"id\", \"birthdate\", \"required\", \"\", \"name\", \"birthdate\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"birthdate\", \"ngModel\"], [\"for\", \"nationality\"], [\"type\", \"text\", \"id\", \"nationality\", \"required\", \"\", \"name\", \"nationality\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"nationality\", \"ngModel\"], [\"for\", \"experienceYears\"], [\"type\", \"number\", \"id\", \"experienceYears\", \"required\", \"\", \"name\", \"experienceYears\", \"step\", \"1\", \"min\", \"0\", \"max\", \"30\", 1, \"form-control\", \"required\", 3, \"ngModel\"], [\"experienceYears\", \"ngModel\"], [\"for\", \"club\"], [\"id\", \"club\", \"name\", \"club\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"clubModel\", \"ngModel\"], [3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-xs-12\", \"btn-toolbar\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"col-xs-12\"], [1, \"alert\", \"alert-danger\"], [3, \"value\", \"selected\"], [4, \"ngIf\"]],\n  template: function PlayerEditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r26 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function PlayerEditComponent_Template_form_ngSubmit_2_listener() {\n        i0.ɵɵrestoreView(_r26);\n        const _r0 = i0.ɵɵreference(3);\n        return i0.ɵɵresetView(ctx.onSubmit(_r0));\n      });\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"label\", 6);\n      i0.ɵɵtext(7, \"Name:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 7, 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"div\", 5)(12, \"label\", 9);\n      i0.ɵɵtext(13, \"Position:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"input\", 10, 11);\n      i0.ɵɵtemplate(16, PlayerEditComponent_div_16_Template, 3, 0, \"div\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 4)(18, \"div\", 5)(19, \"label\", 13);\n      i0.ɵɵtext(20, \"Height:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"input\", 14, 15);\n      i0.ɵɵtemplate(23, PlayerEditComponent_div_23_Template, 3, 0, \"div\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 4)(25, \"div\", 5)(26, \"label\", 17);\n      i0.ɵɵtext(27, \"Weight:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"input\", 18, 19);\n      i0.ɵɵtemplate(30, PlayerEditComponent_div_30_Template, 3, 0, \"div\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"div\", 4)(32, \"div\", 5)(33, \"label\", 20);\n      i0.ɵɵtext(34, \"Birthdate:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"input\", 21, 22);\n      i0.ɵɵpipe(37, \"date\");\n      i0.ɵɵtemplate(38, PlayerEditComponent_div_38_Template, 3, 0, \"div\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(39, \"div\", 4)(40, \"div\", 5)(41, \"label\", 23);\n      i0.ɵɵtext(42, \"Nationality:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(43, \"input\", 24, 25);\n      i0.ɵɵtemplate(45, PlayerEditComponent_div_45_Template, 3, 0, \"div\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(46, \"div\", 4)(47, \"div\", 5)(48, \"label\", 26);\n      i0.ɵɵtext(49, \"Experience Years:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(50, \"input\", 27, 28);\n      i0.ɵɵtemplate(52, PlayerEditComponent_div_52_Template, 3, 0, \"div\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(53, \"div\", 4)(54, \"div\", 5)(55, \"label\", 29);\n      i0.ɵɵtext(56, \"Club:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"select\", 30, 31);\n      i0.ɵɵlistener(\"ngModelChange\", function PlayerEditComponent_Template_select_ngModelChange_57_listener($event) {\n        return ctx.selectedClub = $event;\n      });\n      i0.ɵɵtemplate(59, PlayerEditComponent_option_59_Template, 2, 3, \"option\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(60, PlayerEditComponent_div_60_Template, 3, 0, \"div\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(61, \"div\", 4)(62, \"div\", 33)(63, \"button\", 34);\n      i0.ɵɵtext(64, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(65, \"button\", 35);\n      i0.ɵɵlistener(\"click\", function PlayerEditComponent_Template_button_click_65_listener() {\n        return ctx.onCancel();\n      });\n      i0.ɵɵtext(66, \"Cancel\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(67, \"div\", 4)(68, \"div\", 36);\n      i0.ɵɵtemplate(69, PlayerEditComponent_div_69_Template, 12, 7, \"div\", 16);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(3);\n      const _r2 = i0.ɵɵreference(15);\n      const _r4 = i0.ɵɵreference(22);\n      const _r6 = i0.ɵɵreference(29);\n      const _r8 = i0.ɵɵreference(36);\n      const _r10 = i0.ɵɵreference(44);\n      const _r12 = i0.ɵɵreference(51);\n      const _r14 = i0.ɵɵreference(58);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.player == null ? null : ctx.player.playerName);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.player == null ? null : ctx.player.position);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r2.valid && _r2.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.player == null ? null : ctx.player.height);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r4.valid && _r4.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.player == null ? null : ctx.player.weight);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r6.valid && _r6.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind2(37, 18, ctx.player == null ? null : ctx.player.birthdate, \"yyyy-MM-dd\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !_r8.valid && _r8.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.player == null ? null : ctx.player.nationality);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r10.valid && _r10.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.player == null ? null : ctx.player.experienceYears);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !_r12.valid && _r12.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedClub);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.teams);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r14.invalid && (_r14.touched || _r14.dirty));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !_r0.valid);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", !_r0.valid && _r0.touched);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinLengthValidator, i5.MaxLengthValidator, i5.PatternValidator, i5.MinValidator, i5.MaxValidator, i5.NgModel, i5.NgForm, i4.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Player","i0","PlayerEditComponent","constructor","playerService","route","router","teamService","ngOnInit","teamListChangedEvent","subscribe","teams","teamMap","createTeamMap","initializePlayer","getTeams","params","id","undefined","editMode","playerListChangedEvent","players","originalPlayer","getPlayer","player","JSON","parse","stringify","getPlayers","onSubmit","form","values","value","club","console","log","team","newPlayer","playerName","position","height","weight","birthdate","nationality","experienceYears","updatePlayer","addPlayer","navigate","onCancel","map","length","find","selectedClub","getCurrentDate","currentDate","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","getSelectedClubId","setSelectedClubId","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\wdd-430\\src\\app\\players\\player-edit\\player-edit.component.ts","C:\\laragon\\www\\wdd-430\\src\\app\\players\\player-edit\\player-edit.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Player } from '../player.model';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { PlayerService } from '../player.service';\r\nimport { NgForm } from '@angular/forms';\r\nimport { Team } from '../../teams/team.model';\r\nimport { TeamService } from '../../teams/team.service';\r\n\r\n@Component({\r\n  selector: 'wdd430-player-edit',\r\n  templateUrl: './player-edit.component.html',\r\n  styleUrls: ['./player-edit.component.css'],\r\n})\r\nexport class PlayerEditComponent implements OnInit {\r\n  originalPlayer: Player;\r\n  player: Player = null;\r\n  editMode: boolean = false;\r\n  players: Player[]; // Variable to store the players\r\n  teams: Team[]; // Variable to store the teams\r\n\r\n  teamMap: { [id: number]: Team }; // Map to store teams by ID\r\n  selectedClub: number; // Update the type to number\r\n\r\n  constructor(\r\n    private playerService: PlayerService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private teamService: TeamService // Inject the Team service\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.teamService.teamListChangedEvent.subscribe((teams: Team[]) => {\r\n      this.teams = teams;\r\n      this.teamMap = this.createTeamMap(teams);\r\n      this.initializePlayer();\r\n    });\r\n    \r\n    this.teamService.getTeams(); // Move getTeams() call here\r\n    this.route.params.subscribe((params) => {\r\n      let id = params['id'];\r\n      if (id === undefined || id === null) {\r\n        this.editMode = false;\r\n        return;\r\n      }\r\n\r\n      this.playerService.playerListChangedEvent.subscribe(\r\n        (players: Player[]) => {\r\n          this.originalPlayer = this.playerService.getPlayer(id);\r\n          if (\r\n            this.originalPlayer === undefined ||\r\n            this.originalPlayer === null\r\n          ) {\r\n            return;\r\n          }\r\n          this.editMode = true;\r\n          this.player = JSON.parse(JSON.stringify(this.originalPlayer));\r\n          this.initializePlayer();\r\n        }\r\n      );\r\n      this.playerService.getPlayers();\r\n    });\r\n  }\r\n\r\n  onSubmit(form: NgForm) {\r\n    let values = form.value;\r\n    \r\n    let club = this.teamMap[values.club]; \r\n    console.log(team);\r\n      \r\n    let newPlayer = new Player(\r\n      null,\r\n      values.playerName,\r\n      values.position,\r\n      values.height,\r\n      values.weight,\r\n      values.birthdate,\r\n      values.nationality,\r\n      values.experienceYears,\r\n      team\r\n    );    \r\n    if (this.editMode) {\r\n      this.playerService.updatePlayer(this.originalPlayer, newPlayer);\r\n    } else {\r\n      this.playerService.addPlayer(newPlayer);\r\n    }\r\n    this.router.navigate(['/players']);\r\n  }\r\n\r\n  onCancel() {\r\n    this.router.navigate(['/players']);\r\n  }\r\n\r\n  createTeamMap(teams: Team[]): { [id: number]: Team } {\r\n    let map: { [id: number]: Team } = {};\r\n    for (let team of teams) {\r\n      map[team.id] = team;\r\n    }\r\n    return map;\r\n  }\r\n\r\n  initializePlayer() {\r\n    if (this.teams.length > 0) {\r\n      this.player.club = this.teams.find((team) => team.id === this.player.club?.id);\r\n      this.selectedClub = this.player.club?.id;\r\n    } else {\r\n      this.player = {\r\n        id: null,\r\n        playerName: null,\r\n        position: null,\r\n        height: null,\r\n        weight: null,\r\n        birthdate: null,\r\n        nationality: null,\r\n        experienceYears: null,\r\n        club: null,\r\n      };\r\n      this.selectedClub = null;\r\n    }\r\n  }\r\n  getCurrentDate(): string {\r\n    const currentDate = new Date();\r\n    const year = currentDate.getFullYear();\r\n    const month = (currentDate.getMonth() + 1).toString().padStart(2, '0');\r\n    const day = currentDate.getDate().toString().padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n\r\n  getSelectedClubId() {\r\n    return this.player?.club?.id;\r\n  }\r\n  \r\n  setSelectedClubId(id: number) {\r\n    this.player.club = this.teams.find((team) => team.id === id);\r\n  }\r\n}\r\n","<div class=\"panel panel-default\">\n    <div class=\"panel-body\">\n        <form id=\"contact-edit\" (ngSubmit)=\"onSubmit(f)\" #f=\"ngForm\">\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"playerName\">Name:</label>\n                    <input type=\"text\" id=\"playerName\" class=\"form-control required\" required name=\"playerName\"\n                        #playerName=\"ngModel\" [ngModel]=\"player?.playerName\">\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"position\">Position:</label>\n                    <input type=\"text\" id=\"position\" class=\"form-control required\" required name=\"position\"\n                        #position=\"ngModel\" [ngModel]=\"player?.position\">\n\n                    <div *ngIf=\"!position.valid && position.touched\" class=\"alert  alert-danger\">\n                        <span>Please enter a valid position</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"height\">Height:</label>\n                    <input type=\"number\" id=\"height\" class=\"form-control required\" required name=\"height\"\n                        #height=\"ngModel\" [ngModel]=\"player?.height\" step=\"0.1\" min=\"1\" max=\"2.5\">\n\n                    <div *ngIf=\"!height.valid && height.touched\" class=\"alert alert-danger\">\n                        <span>Please enter a valid height between 1 and 2.5</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"weight\">Weight:</label>\n                    <input type=\"number\" id=\"weight\" class=\"form-control required\" required name=\"weight\"\n                        #weight=\"ngModel\" [ngModel]=\"player?.weight\"\n                        pattern=\"^(?:(?:5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-9]|[1-4][0-9]{2})(?:\\.[0-9]{1,2})?|150(?:\\.00)?)$\"\n                        minlength=\"3\" maxlength=\"6\">\n\n                    <div *ngIf=\"!weight.valid && weight.touched\" class=\"alert  alert-danger\">\n                        <span>Please enter a valid Weight</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"birthdate\">Birthdate:</label>\n                    <input type=\"date\" id=\"birthdate\" class=\"form-control required\" required name=\"birthdate\"\n                        #birthdate=\"ngModel\" [ngModel]=\"player?.birthdate | date:'yyyy-MM-dd'\">\n                    <!-- add a span to display a message to the user when the birthdate field is invalid -->\n                    <div *ngIf=\"!birthdate.valid && birthdate.touched\" class=\"alert alert-danger\">\n                        <span>Please enter a valid birthdate</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"nationality\">Nationality:</label>\n                    <input type=\"text\" id=\"nationality\" class=\"form-control required\" required name=\"nationality\"\n                        #nationality=\"ngModel\" [ngModel]=\"player?.nationality\">\n\n                    <div *ngIf=\"!nationality.valid && nationality.touched\" class=\"alert  alert-danger\">\n                        <span>Please enter a valid Nationality</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"experienceYears\">Experience Years:</label>\n                    <input type=\"number\" id=\"experienceYears\" class=\"form-control required\" required\n                        name=\"experienceYears\" #experienceYears=\"ngModel\" [ngModel]=\"player?.experienceYears\" step=\"1\"\n                        min=\"0\" max=\"30\">\n                    <div *ngIf=\"!experienceYears.valid && experienceYears.touched\" class=\"alert alert-danger\">\n                        <span>Please enter a valid integer between 0 and 30</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-sm-12 form-group\">\n                    <label for=\"club\">Club:</label>\n                    <select id=\"club\" class=\"form-control\" name=\"club\" [(ngModel)]=\"selectedClub\" required\n                        #clubModel=\"ngModel\">\n                        <option *ngFor=\"let team of teams\" [value]=\"team.id\" [selected]=\"team.id === player?.club?.id\">\n                            {{ team.teamName }}\n                        </option>\n                    </select>\n                    <div *ngIf=\"clubModel.invalid && (clubModel.touched || clubModel.dirty)\" class=\"alert alert-danger\">\n                        <span>Please enter a valid club</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-xs-12 btn-toolbar\">\n                    <button class=\"btn btn-success\" type=\"submit\" [disabled]=\"!f.valid\">Save</button>\n                    <button class=\"btn btn-primary\" type=\"button\" (click)=\"onCancel()\">Cancel</button>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-xs-12\">\n                    <div class=\"alert alert-danger\" *ngIf=\"!f.valid && f.touched\">\n                        <div>\n                            <p>Please fix the following errors:</p>\n                            <ul>\n                                <li *ngIf=\"!playerName.valid\">Player Name is required.</li>\n                                <li *ngIf=\"!position.valid\">Position is required.</li>\n                                <li *ngIf=\"!height.valid\">Height is required.</li>\n                                <li *ngIf=\"!weight.valid\">Weight is required.</li>\n                                <li *ngIf=\"!birthdate.valid\">Birthdate is required.</li>\n                                <li *ngIf=\"!nationality.valid\">Nationality is required.</li>\n                                <li *ngIf=\"!experienceYears.valid\">Experience Years is required.</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </form>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}